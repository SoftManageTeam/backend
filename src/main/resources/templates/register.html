<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>会员注册</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
<!-- Mobile Devices Support @begin -->
<meta content="application/xhtml+xml;charset=UTF-8" http-equiv="Content-Type">
<meta content="no-cache,must-revalidate" http-equiv="Cache-Control">
<meta content="no-cache" http-equiv="pragma">
<meta content="0" http-equiv="expires">
<meta content="telephone=no, address=no" name="format-detection">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta name="apple-mobile-web-app-capable" content="yes" />
<!-- apple devices fullscreen -->
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<!-- Mobile Devices Support @end -->
<link rel="stylesheet" type="text/css" href="FortAwesome/docs/assets/css/font-awesome.css">
<link rel="stylesheet" type="text/css" href="style.css" />
<script src="js/jquery.js"></script> 
<script src="js/bootstrap.min.js"></script> 
<script type="text/javascript" src="js/swipe.js"></script>
<script src="js/jquery.js"></script> 
<script src="js/bootstrap.min.js"></script>  

<script type="text/javascript">
   var _global = {};
	   _global.spm = {};
	   
document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {WeixinJSBridge.call('hideToolbar');});
</script>
<script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){	
$(".dci").click( function () { 
$(this).toggleClass("selected");
 }); 
});
</script>
</head>

<body>
<div class="body login-bg">
    <p class="login-logo"><img src="images/logo.png" alt="logo"></p>
    <h2 class="login-tit">会员注册</h2>
    <div class="login-div">
      <form>
        <p class="clearfix"><span class="floatl">帐号：</span><em class="floatr">
          <input type="text" class="ltxt floatl" name="name" id="name" onkeydown="tipclear()"><span id="tishi1"></span>
          </em></p>
        <p class="clearfix"><span class="floatl">密码：</span><em class="floatr">
          <input  type="password" name="pw" id="pw1" class="ltxt floatl" onkeydown="tipclear()"><span id="tishi2"></span>
          </em></p>
          <p class="clearfix"><span class="floatl">确认密码：</span><em class="floatr">
          <input type="password" class="ltxt floatl"  name="pw" id="pw2" onkeydown="tipclear()" onkeyup="validate()"><span id="tishi3"></span><span id="tishi"></span>
          </em><span id="state"></span></p>
        <p class="clearfix lbtn">
          <input type="button" id="submit" name="submit" class="orange-btn floatl lbtn-dl" value="确认">
          <a href="login.html" class="floatr red-btn">已注册？登录</a></p>
      </form>
    </div>
 
    <!--下导航-->
<div class="js-navmenu nav-on-bottom style-2">
    <div class="nav-menu has-menu-3"> <a href="index.html" class="icon-home"></a>
      <div class="divide">&nbsp;</div>
      <div class="one"> <a class="mainmenu js-mainmenu" href="javascript:void(0);"> <i class="arrow-weixin"></i> 菜品 </a>
        <div class="submenu js-submenu"> <span class="arrow before-arrow"></span> <span class="arrow after-arrow"></span>
          <ul>
            <li> <a href="foodlist.html"> 火锅 </a> </li>
            <li> <a href="foodlist.html"> 地方菜 </a> </li>
            <li> <a href="foodlist.html"> 西餐 </a> </li>
            <li> <a href="foodlist.html"> 快餐 </a> </li>
          </ul>
        </div>
      </div>
      <div class="divide">&nbsp;</div>
      <div class="one"> <a class="mainmenu js-mainmenu" href="javascript:void(0);"> <i class="arrow-weixin"></i> 会员 </a>
        <div class="submenu js-submenu"> <span class="arrow before-arrow"></span> <span class="arrow after-arrow"></span>
          <ul>
            <li> <a href="foodlist.html"> 我要会员 </a> </li>
            <li> <a href="membercenter.html"> 会员中心 </a> </li>
          </ul>
        </div>
      </div>
      <div class="divide">&nbsp;</div>
      <div class="one"> <a class="mainmenu js-mainmenu" href="javascript:void(0);"> <i class="arrow-weixin"></i> VIP </a>
        <div class="submenu js-submenu"> <span class="arrow before-arrow"></span> <span class="arrow after-arrow"></span>
          <ul>
            <li> <a href="register.html"> 我要成为VIP </a> </li>
            <li> <a href="score.html"> 积分兑换 </a> </li>
          </ul>
        </div>
      </div>
      <div class="divide">&nbsp;</div>
      <div class="one"> <a class="mainmenu js-mainmenu" href="javascript:void(0);"> <i class="arrow-weixin"></i> 订单 </a>
        <div class="submenu js-submenu"> <span class="arrow before-arrow"></span> <span class="arrow after-arrow"></span>
          <ul>
            <li> <a href="order.html"> 会员订单 </a> </li>
          </ul>
        </div>
        <!--submenu js-submenu--> 
      </div>
      <!--one--> 
    </div>
  </div>

  <!--nav-on-bottom下导航结束-->
</div>
<!--body--> 
<script type="text/javascript" src="js/wap.min.js"></script>
<script type="text/javascript">
function tipclear(){
	document.getElementById("tishi1").innerHTML="";
	document.getElementById("tishi2").innerHTML="";
	document.getElementById("tishi3").innerHTML="";
	}
function validate() {
var pw1 = document.getElementById("pw1").value;
var pw2 = document.getElementById("pw2").value;
	if(pw1 == pw2) {
	document.getElementById("tishi").innerHTML="<font color='green'>两次密码相同</font>";
	document.getElementById("submit").disabled = false;
	}
	else {
	document.getElementById("tishi").innerHTML="<font color='red'>两次密码不相同</font>";
	document.getElementById("submit").disabled = true;
	}
}
$("#submit").click(function(){
	var name = document.getElementById("name").value;
	var pw1 = document.getElementById("pw1").value;
	var pw2 = document.getElementById("pw2").value;
	if( name == ""){
	document.getElementById("tishi1").innerHTML="<font color='red'>请输入用户名</font>";
	document.getElementById("submit").style.backgroundColor = "#C0C0C0";	
	}
	if( pw1 == ""){
	document.getElementById("tishi2").innerHTML="<font color='red'>请输入密码</font>";
	document.getElementById("submit").style.backgroundColor = "#C0C0C0";		
	}
	if( pw2 == ""){
	document.getElementById("tishi3").innerHTML="<font color='red'>请确认密码</font>";
	document.getElementById("submit").style.backgroundColor = "#C0C0C0";	
	}
	if(( name != "")&&( pw1 != "")&&( pw2 != "")){
	var pw = $('input[id="pw1"]').val();
	var name = $('input[name="name"]').val()
	var user = {"name":name,"password":pw};
	alert(JSON.stringify(user));
	$.ajax(
					{
						type:"post",
						dataType:"json",
						url:"postuser",
						data:{"user":JSON.stringify(user)},
		                success:function(statusCode){
							//var result = JSON.stringify(result);
							//var state = result.state;
							if(statusCode==300){
								alert("注册成功");
							}	
							if(statusCode==301){
								alert("注册失败，用户名已存在！");
							}	
		                }
					}
				)
	//window.location.href="login.html";
	}
	}
)
</script>
</body>
